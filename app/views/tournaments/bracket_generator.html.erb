<%= javascript_pack_tag "brackets-viewer", 'data-turbolinks-track': "reload" %>

<%= form_with do |f| %>
<div class="bg-gray-800 min-h-screen-full pb-10">
    <div class="md:flex md:items-center md:justify-between px-10 py-5 bg-orange-800">
        <div class="flex-1 min-w-0">
            <h2 class="text-2xl font-bold leading-7 text-white sm:text-3xl sm:leading-9 sm:truncate"><%= t ".title" %>
            </h2>
        </div>
    </div>
    <div class="bg-white shadow px-4 py-5 sm:rounded-lg sm:p-6 mx-10 my-10">
        <div class="md:grid md:grid-cols-3 md:gap-6">
            <div class="mt-5 md:mt-0 md:col-span-2">

                <div class="grid grid-cols-3 gap-6">
                    <div class="col-span-3 sm:col-span-2">
                        <label for="name"
                            class="block text-sm font-medium leading-5 text-gray-700"><%= t ".name" %>:</label>
                        <div class="mt-1 flex rounded-md shadow-sm">
                            <%= f.text_field :name, id: "name", class: "form-input flex-1 block w-full rounded-none rounded-md transition duration-150 ease-in-out sm:text-sm sm:leading-5" %>
                        </div>
                        <p id="name_stage" class="text-xs text-red-500"></p>
                    </div>
                </div>
                <div class="grid grid-cols-3 gap-6 mt-6">
                    <div class="col-span-3 sm:col-span-2">
                        <label for="stage_type"
                            class="block text-sm font-medium leading-5 text-gray-700"><%= t ".type" %>:</label>
                        <div class="mt-1 flex rounded-md shadow-sm">
                            <%= f.select :stage, options_for_select(["single_elimination", "double_elimination", "round_robin"]), { :include_blank => false }, { :class => "form-select block w-full transition duration-150 ease-in-out sm:text-sm sm:leading-5", id: "stage" } %>
                        </div>
                    </div>
                </div>
                <div class="mt-6 grid grid-cols-1 row-gap-6 col-gap-4 sm:grid-cols-6">
                    <div class="sm:col-span-4">
                        <label for="game" class="block text-sm font-medium leading-5 text-gray-700"><%= t ".game" %>:
                        </label>
                        <div class="mt-1 flex rounded-md shadow-sm">
                            <%= f.select :game, Game.all.collect { |g| [g.name, g.id] }, {}, { :class => "form-select block w-full transition duration-150 ease-in-out sm:text-sm sm:leading-5", id: "game" } %>
                        </div>
                    </div>
                </div>
                <div class="grid grid-cols-3 gap-6 mt-6">
                    <div class="col-span-3 sm:col-span-2">
                        <label for="about" class="block text-sm leading-5 font-medium text-gray-700">
                            <%= t ".rosters" %>:</label>
                        <div class="mt-1 flex rounded-md shadow-sm">
                            <%= f.select :rosters, Roster.all.collect { |t| [t.name] }, { include_hidden: false }, { size: 6, multiple: true, style: "display: none", id: "select" } %>
                            <%= render partial: "tournaments/partials/select_rosters" %>
                        </div>
                    </div>
                    <p id="participants" class="text-xs text-red-500"></p>
                </div>
            </div>
            <p id="tournament" class="text-xs text-red-500"></p>
            <%= f.submit I18n.t("tournaments.submit.generate_bracket"), id: "bracket-tournament", class: "mt-6 flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white  bg-orange-800 hover:bg-orange-700 focus:outline-none focus:border-orange-700 focus:shadow-outline-purple active:bg-orange-700 transition duration-150 ease-in-out" %>
        </div>
    </div>
</div>
<% end %>
<!-- This div will be used as the root for the library. It must be **perfectly** empty to prevent a FOUC. -->
<div id="bracketsViewer" class="brackets-viewer" data-module="brackets-manager" style="display: none;">
    <%= link_to "Run this Tournament", new_tournament_path(), class: "mt-6 flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white  bg-orange-800 hover:bg-orange-700 focus:outline-none focus:border-orange-700 focus:shadow-outline-purple active:bg-orange-700 transition duration-150 ease-in-out" %>
</div>